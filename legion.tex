\documentclass[11pt]{book}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{textcomp}
\usepackage{listings}
\usepackage{hyperref}
\usepackage{url}
\usepackage{graphicx}
\usepackage{microtype}
\usepackage{xcolor}
\usepackage{geometry} % widen the page margins a bit

\usepackage{inconsolata} % the default monospace font is ugly

\lstset{upquote=true}

\newcommand{\legionbook}[1]{{\tt Examples/#1}}
\newcommand{\Cpp}{C++}

% use Eisvogen style for code highlighting
% https://github.com/Wandmalfarbe/pandoc-latex-template/blob/04e329698d01c3a25aa72ad81d98483284669316/eisvogel.tex

%
% general listing colors
%
\definecolor{listing-background}{HTML}{F7F7F7}
\definecolor{listing-rule}{HTML}{B3B2B3}
\definecolor{listing-numbers}{HTML}{B3B2B3}
\definecolor{listing-text-color}{HTML}{000000}
\definecolor{listing-keyword}{HTML}{435489}
\definecolor{listing-keyword-2}{HTML}{1284CA} % additional keywords
\definecolor{listing-keyword-3}{HTML}{9137CB} % additional keywords
\definecolor{listing-identifier}{HTML}{435489}
\definecolor{listing-string}{HTML}{00999A}
\definecolor{listing-comment}{HTML}{8E8E8E}

\lstdefinestyle{eisvogel_listing_style}{
  numbers          = left,
  xleftmargin      = 2.7em,
  framexleftmargin = 2.5em,
  backgroundcolor  = \color{listing-background},
  basicstyle       = \color{listing-text-color}\linespread{1.0}%
                      \lst@ifdisplaystyle%
                      \scriptsize%
                      \fi\ttfamily{},
  breaklines       = true,
  frame            = single,
  framesep         = 0.19em,
  rulecolor        = \color{listing-rule},
  frameround       = ffff,
  tabsize          = 4,
  numberstyle      = \color{listing-numbers},
  aboveskip        = 1.0em,
  belowskip        = 0.1em,
  abovecaptionskip = 0em,
  belowcaptionskip = 1.0em,
  keywordstyle     = {\color{listing-keyword}\bfseries},
  keywordstyle     = {[2]\color{listing-keyword-2}\bfseries},
  keywordstyle     = {[3]\color{listing-keyword-3}\bfseries\itshape},
  sensitive        = true,
  identifierstyle  = \color{listing-identifier},
  commentstyle     = \color{listing-comment},
  stringstyle      = \color{listing-string},
  showstringspaces = false,
  escapeinside     = {/*@}{@*/}, % Allow LaTeX inside these special comments
  literate         =
  {á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
  {Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
  {à}{{\`a}}1 {è}{{\'e}}1 {ì}{{\`i}}1 {ò}{{\`o}}1 {ù}{{\`u}}1
  {À}{{\`A}}1 {È}{{\'E}}1 {Ì}{{\`I}}1 {Ò}{{\`O}}1 {Ù}{{\`U}}1
  {ä}{{\"a}}1 {ë}{{\"e}}1 {ï}{{\"i}}1 {ö}{{\"o}}1 {ü}{{\"u}}1
  {Ä}{{\"A}}1 {Ë}{{\"E}}1 {Ï}{{\"I}}1 {Ö}{{\"O}}1 {Ü}{{\"U}}1
  {â}{{\^a}}1 {ê}{{\^e}}1 {î}{{\^i}}1 {ô}{{\^o}}1 {û}{{\^u}}1
  {Â}{{\^A}}1 {Ê}{{\^E}}1 {Î}{{\^I}}1 {Ô}{{\^O}}1 {Û}{{\^U}}1
  {œ}{{\oe}}1 {Œ}{{\OE}}1 {æ}{{\ae}}1 {Æ}{{\AE}}1 {ß}{{\ss}}1
  {ç}{{\c c}}1 {Ç}{{\c C}}1 {ø}{{\o}}1 {å}{{\r a}}1 {Å}{{\r A}}1
  {€}{{\EUR}}1 {£}{{\pounds}}1 {«}{{\guillemotleft}}1
  {»}{{\guillemotright}}1 {ñ}{{\~n}}1 {Ñ}{{\~N}}1 {¿}{{?`}}1
  {…}{{\ldots}}1 {≥}{{>=}}1 {≤}{{<=}}1 {„}{{\glqq}}1 {“}{{\grqq}}1
  {”}{{''}}1
}
\lstset{style=eisvogel_listing_style}

\lstdefinestyle{inline}{
  numbers=none,
}

\begin{document}

\title{Programming with Legion}
\author{Alex Aiken \and Michael Bauer}
\input{date_and_version}
\maketitle

\subsection*{Preface}
\addcontentsline{toc}{subsection}{Preface}

The first paper describing the Legion programming model
was published in 2012 \cite{Legion12}.  Since then, there has been
enormous progress and many people have contributed to
the project.  Throughout this period new application developers have
learned Legion through a combination of examples, lore from other
members of the project, research papers and reading the source code of
the Legion implementation.  The intention here is to put down in 
a systematic fashion what a programmer who wants to use
Legion to develop high performance applications needs to know.

This book is intended to be a combination tutorial, rationale and
manual.  The first part is the tutorial and rationale, laying out in some
detail what Legion is and why it is that way.  The second part is the manual, which describes
each of the API calls for the Legion \Cpp\ runtime.

The example programs and configuration files referred to in this book can be found in the directory
\legionbook{} included in the Legion distribution.

This book is incomplete and will remain incomplete for
some time to come.  But on the theory that partial documentation is better than no
documentation, the manual is being made available while it is
still in progress in the hope that it will be useful to new Legion
programmers.  Please report any errors or other issues to {\tt
  aiken@cs.stanford.edu}. \\[2in] Alex Aiken\\ Stanford, CA \\
September 2022

\tableofcontents

\part{Legion Runtime Tutorial}
\include{installation}
\include{tasks}
\include{regions}
\include{partitioning}
\include{control_replication}
\include{coherence}
%\include{constraints}
\include{mapping}
%\include{performance}
\include{interop}
%\include{reference}

\bibliographystyle{alpha}
\bibliography{bibliography}

\end{document}
